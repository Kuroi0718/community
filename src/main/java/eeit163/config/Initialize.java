package eeit163.config;

import java.util.Base64;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationListener;
import org.springframework.context.event.ContextRefreshedEvent;
import org.springframework.stereotype.Component;

import eeit163.model.Member;
import eeit163.model.MemberRepository;

@Component
public class Initialize implements ApplicationListener<ContextRefreshedEvent> {

	@Autowired
	private MemberRepository mDAO;

	@Override
	public void onApplicationEvent(ContextRefreshedEvent event) {
//		ServletContext servletContext = ((WebApplicationContext) event.getApplicationContext()).getServletContext();
//		servletContext.setAttribute("root", servletContext.getContextPath());
//		servletContext.setAttribute("webName", "Community");

		insertDataIntoDB();
	}

	/**
	 * 愈設帳號<br>
	 */
	private void insertDataIntoDB() {

		if (mDAO.count() != 0) {
			return;
		}
		try {
			Member m = new Member();
			m.setUsername("admin");
			m.setPassword("8uhb");
			m.setEmail("eeit163sender@outlook.com");
			m.setLevel("admin");
			m.setPhoto(Base64.getDecoder().decode("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"));
			mDAO.save(m);
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

}
